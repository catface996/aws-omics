# å¥¶ç‰›åŸºå› ç»„æ¨¡æ‹Ÿæµ‹åºæ•°æ®ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—ä»‹ç»å¦‚ä½•ä½¿ç”¨é¡¹ç›®ä¸­çš„å·¥å…·ä»å¥¶ç‰›å‚è€ƒåŸºå› ç»„ç”Ÿæˆæ¨¡æ‹Ÿæµ‹åºæ•°æ®ï¼Œå¹¶åœ¨AWS Omicsä¸­è¿›è¡Œåˆ†æã€‚è¿™å¯¹äºå­¦ä¹ åŸºå› ç»„å­¦åˆ†ææµç¨‹ã€æµ‹è¯•å·¥ä½œæµç¨‹å’Œæ¼”ç¤ºAWS OmicsåŠŸèƒ½éå¸¸æœ‰ç”¨ã€‚

## ğŸ¯ æ¨¡æ‹Ÿæ•°æ®çš„ä¼˜åŠ¿

### ä¸ºä»€ä¹ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Ÿ
1. **å·²çŸ¥çœŸç›¸**: æˆ‘ä»¬çŸ¥é“æ‰€æœ‰å˜å¼‚çš„çœŸå®ä½ç½®å’Œç±»å‹
2. **æˆæœ¬æ•ˆç›Š**: æ— éœ€è´­ä¹°æ˜‚è´µçš„çœŸå®æµ‹åºæ•°æ®
3. **å¯æ§æ€§**: å¯ä»¥æ§åˆ¶å˜å¼‚æ•°é‡ã€ç±»å‹å’Œåˆ†å¸ƒ
4. **å­¦ä¹ å‹å¥½**: é€‚åˆå­¦ä¹ å’Œæµ‹è¯•åˆ†ææµç¨‹
5. **å¿«é€Ÿè¿­ä»£**: å¯ä»¥å¿«é€Ÿç”Ÿæˆä¸åŒå‚æ•°çš„æ•°æ®é›†

### æ¨¡æ‹Ÿæ•°æ®ç‰¹ç‚¹
- **åŸºäºçœŸå®å‚è€ƒåŸºå› ç»„**: ä½¿ç”¨å¥¶ç‰›ARS-UCD1.2å‚è€ƒåŸºå› ç»„
- **çœŸå®çš„å˜å¼‚ç±»å‹**: åŒ…æ‹¬SNPã€æ’å…¥ã€åˆ é™¤ç­‰
- **ç¬¦åˆç”Ÿç‰©å­¦è§„å¾‹**: GCå«é‡ã€å˜å¼‚é¢‘ç‡ç­‰ç¬¦åˆå®é™…æƒ…å†µ
- **æ ‡å‡†æ ¼å¼**: ç”Ÿæˆæ ‡å‡†çš„FASTQå’ŒVCFæ ¼å¼æ–‡ä»¶

## ğŸ› ï¸ å·¥å…·ä»‹ç»

### 1. simulate_sequencing_data.py
**åŠŸèƒ½**: ä»å‚è€ƒåŸºå› ç»„ç”Ÿæˆæ¨¡æ‹Ÿæµ‹åºæ•°æ®

**ä¸»è¦ç‰¹æ€§**:
- ç”ŸæˆSNPã€InDelç­‰å˜å¼‚
- åˆ›å»ºåŒ…å«å˜å¼‚çš„æµ‹åºreads
- è¾“å‡ºæ ‡å‡†çš„VCFå’ŒFASTQæ ¼å¼
- ç”Ÿæˆè¯¦ç»†çš„æ¨¡æ‹ŸæŠ¥å‘Š

### 2. analyze_simulated_data.py
**åŠŸèƒ½**: åˆ†ææ¨¡æ‹Ÿæ•°æ®çš„è´¨é‡å’Œç‰¹å¾

**ä¸»è¦ç‰¹æ€§**:
- ç»Ÿè®¡å˜å¼‚ç±»å‹å’Œåˆ†å¸ƒ
- åˆ†æreadsè´¨é‡å’ŒGCå«é‡
- ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨
- è¯„ä¼°æ•°æ®è´¨é‡

### 3. aws_omics_workflow_example.py
**åŠŸèƒ½**: åˆ›å»ºAWS Omicså·¥ä½œæµå’Œéƒ¨ç½²è„šæœ¬

**ä¸»è¦ç‰¹æ€§**:
- ç”ŸæˆWDLå·¥ä½œæµå®šä¹‰
- åˆ›å»ºAWSèµ„æºéƒ¨ç½²è„šæœ¬
- æä¾›å®Œæ•´çš„äº‘ç«¯åˆ†ææµç¨‹

## ğŸ“‹ ä½¿ç”¨æ­¥éª¤

### æ­¥éª¤1: ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®

```bash
# åŸºç¡€æ¨¡æ‹Ÿï¼ˆæ¨èç”¨äºå­¦ä¹ ï¼‰
python3 simulate_sequencing_data.py \\
    --num-snps 500 \\
    --num-indels 100 \\
    --num-reads 5000 \\
    --max-chromosomes 2

# å¤§è§„æ¨¡æ¨¡æ‹Ÿï¼ˆç”¨äºæ€§èƒ½æµ‹è¯•ï¼‰
python3 simulate_sequencing_data.py \\
    --num-snps 10000 \\
    --num-indels 2000 \\
    --num-reads 50000 \\
    --max-chromosomes 5
```

**å‚æ•°è¯´æ˜**:
- `--num-snps`: SNPå˜å¼‚æ•°é‡
- `--num-indels`: InDelå˜å¼‚æ•°é‡  
- `--num-reads`: ç”Ÿæˆçš„readsæ•°é‡
- `--read-length`: readsé•¿åº¦ï¼ˆé»˜è®¤150bpï¼‰
- `--max-chromosomes`: ä½¿ç”¨çš„æŸ“è‰²ä½“æ•°é‡ï¼ˆèŠ‚çœå†…å­˜ï¼‰

### æ­¥éª¤2: åˆ†ææ¨¡æ‹Ÿæ•°æ®

```bash
# åˆ†æç”Ÿæˆçš„æ•°æ®è´¨é‡
python3 analyze_simulated_data.py

# æŒ‡å®šæ•°æ®ç›®å½•
python3 analyze_simulated_data.py --data-dir ./simulated_data
```

### æ­¥éª¤3: åˆ›å»ºAWS Omicså·¥ä½œæµ

```bash
# åˆ›å»ºWDLå·¥ä½œæµå®šä¹‰
python3 aws_omics_workflow_example.py --action create-workflow-def

# åˆ›å»ºéƒ¨ç½²è„šæœ¬
python3 aws_omics_workflow_example.py --action create-deployment-script
```

### æ­¥éª¤4: éƒ¨ç½²åˆ°AWS Omics

```bash
# è¿è¡Œéƒ¨ç½²è„šæœ¬
chmod +x deploy_omics_simulation.sh
./deploy_omics_simulation.sh
```

## ğŸ“Š è¾“å‡ºæ–‡ä»¶è¯´æ˜

### æ¨¡æ‹Ÿæ•°æ®æ–‡ä»¶

| æ–‡ä»¶å | æ ¼å¼ | æè¿° |
|--------|------|------|
| `simulated_variants.vcf` | VCF | çœŸå®å˜å¼‚åˆ—è¡¨ï¼ˆé‡‘æ ‡å‡†ï¼‰ |
| `simulated_reads.fastq` | FASTQ | æ¨¡æ‹Ÿæµ‹åºreads |
| `simulation_report.json` | JSON | è¯¦ç»†çš„æ¨¡æ‹ŸæŠ¥å‘Š |
| `simulation_analysis.png` | PNG | æ•°æ®è´¨é‡å¯è§†åŒ–å›¾è¡¨ |

### VCFæ–‡ä»¶ç¤ºä¾‹
```
#CHROM	POS	ID	REF	ALT	QUAL	FILTER	INFO	FORMAT	Sample1
NC_037328.1	103435	var_000001	A	AC	28	PASS	DP=17	GT:DP	0/1:17
NC_037328.1	2178702	var_000002	T	C	33	PASS	DP=21	GT:DP	0/1:21
```

### FASTQæ–‡ä»¶ç¤ºä¾‹
```
@read_000001 NC_037329.1:58541633-58541782
GCCATCAACAAGCAGCCCATGCACTGTGACAGGAGGGTAGCTGCTGCTCTCTGCAATTGGAGAAATCCTGTGTGCAACACTGAAGACCCAGTGCAGCCAAAAATAAAAGAAATAAAGGAGTTAACTCATTGAAAAAAGGATTTTTCATAG
+
I7$HB?,I8%--A*$8*)1EEDF4F"39$GBI'7)6="#%,6>81.&'9:21A7()10;)1":1":./,A*22>IDF>2%"+E(,.?.G4FG(8;C;H&+B7:D+DDH6&@7"&I+.8=.4B":&:D+"3-5#E)@7F3/B!$9C03#?)
```

## ğŸ”¬ åˆ†æå·¥ä½œæµç¨‹

### 1. åºåˆ—æ¯”å¯¹
```bash
# ä½¿ç”¨BWAè¿›è¡Œåºåˆ—æ¯”å¯¹
bwa index reference_genome.fna
bwa mem reference_genome.fna simulated_reads.fastq > aligned.sam
samtools view -bS aligned.sam | samtools sort > aligned.sorted.bam
samtools index aligned.sorted.bam
```

### 2. å˜å¼‚æ£€æµ‹
```bash
# ä½¿ç”¨GATKè¿›è¡Œå˜å¼‚æ£€æµ‹
gatk HaplotypeCaller \\
    -R reference_genome.fna \\
    -I aligned.sorted.bam \\
    -O detected_variants.vcf
```

### 3. ç»“æœæ¯”è¾ƒ
```bash
# æ¯”è¾ƒæ£€æµ‹åˆ°çš„å˜å¼‚ä¸çœŸå®å˜å¼‚
bcftools isec -p comparison_results \\
    simulated_variants.vcf \\
    detected_variants.vcf
```

## ğŸ“ˆ æ€§èƒ½åŸºå‡†æµ‹è¯•

### ä¸åŒè§„æ¨¡çš„æ•°æ®é›†

| æ•°æ®é›†è§„æ¨¡ | SNPs | InDels | Reads | ç”Ÿæˆæ—¶é—´ | æ–‡ä»¶å¤§å° |
|------------|------|--------|-------|----------|----------|
| å°å‹ | 100 | 20 | 1,000 | ~30ç§’ | ~350KB |
| ä¸­å‹ | 1,000 | 200 | 10,000 | ~2åˆ†é’Ÿ | ~3.5MB |
| å¤§å‹ | 10,000 | 2,000 | 100,000 | ~15åˆ†é’Ÿ | ~35MB |

### æ¨èé…ç½®

**å­¦ä¹ å’Œæ¼”ç¤º**:
```bash
python3 simulate_sequencing_data.py \\
    --num-snps 500 \\
    --num-indels 100 \\
    --num-reads 5000
```

**å·¥ä½œæµæµ‹è¯•**:
```bash
python3 simulate_sequencing_data.py \\
    --num-snps 2000 \\
    --num-indels 400 \\
    --num-reads 20000
```

**æ€§èƒ½åŸºå‡†**:
```bash
python3 simulate_sequencing_data.py \\
    --num-snps 10000 \\
    --num-indels 2000 \\
    --num-reads 100000
```

## ğŸ“ æ•™å­¦åº”ç”¨

### åŸºå› ç»„å­¦è¯¾ç¨‹
1. **å˜å¼‚æ£€æµ‹åŸç†**: é€šè¿‡å·²çŸ¥å˜å¼‚éªŒè¯æ£€æµ‹ç®—æ³•
2. **è´¨é‡æ§åˆ¶**: å­¦ä¹ è¯„ä¼°æµ‹åºæ•°æ®è´¨é‡
3. **å·¥ä½œæµè®¾è®¡**: ç»ƒä¹ æ„å»ºåˆ†ææµç¨‹
4. **ç»“æœè§£é‡Š**: ç†è§£å˜å¼‚æ³¨é‡Šå’ŒåŠŸèƒ½é¢„æµ‹

### å®éªŒè®¾è®¡
1. **å‚æ•°ä¼˜åŒ–**: æµ‹è¯•ä¸åŒç®—æ³•å‚æ•°çš„å½±å“
2. **å·¥å…·æ¯”è¾ƒ**: æ¯”è¾ƒä¸åŒå˜å¼‚æ£€æµ‹å·¥å…·çš„æ€§èƒ½
3. **æµç¨‹éªŒè¯**: éªŒè¯åˆ†ææµç¨‹çš„æ­£ç¡®æ€§
4. **æˆæœ¬ä¼°ç®—**: è¯„ä¼°ä¸åŒè§„æ¨¡æ•°æ®çš„å¤„ç†æˆæœ¬

## ğŸ”§ é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰å˜å¼‚æ¨¡å¼
```python
# ä¿®æ”¹ simulate_sequencing_data.py ä¸­çš„å‚æ•°
# ä¾‹å¦‚ï¼šå¢åŠ ç‰¹å®šç±»å‹å˜å¼‚çš„æ¯”ä¾‹
def generate_snps(self, num_snps=1000, transition_bias=0.7):
    # è½¬æ¢/é¢ æ¢æ¯”ä¾‹åå‘ï¼ˆæ›´ç¬¦åˆçœŸå®æƒ…å†µï¼‰
    pass
```

### ç‰¹å®šåŒºåŸŸæ¨¡æ‹Ÿ
```python
# åªåœ¨ç‰¹å®šåŸºå› åŒºåŸŸç”Ÿæˆå˜å¼‚
def generate_variants_in_genes(self, gene_regions):
    # åŸºäºåŸºå› æ³¨é‡Šæ–‡ä»¶é™åˆ¶å˜å¼‚ä½ç½®
    pass
```

### ç¾¤ä½“é—ä¼ å­¦æ¨¡æ‹Ÿ
```python
# æ¨¡æ‹Ÿå¤šä¸ªä¸ªä½“çš„åŸºå› å‹
def simulate_population(self, num_individuals=10):
    # ç”Ÿæˆå…·æœ‰ä¸åŒåŸºå› å‹çš„å¤šä¸ªæ ·æœ¬
    pass
```

## ğŸš¨ æ³¨æ„äº‹é¡¹

### å†…å­˜ä½¿ç”¨
- å¤§æŸ“è‰²ä½“ä¼šå ç”¨å¤§é‡å†…å­˜
- å»ºè®®ä½¿ç”¨ `--max-chromosomes` å‚æ•°é™åˆ¶
- ç›‘æ§ç³»ç»Ÿå†…å­˜ä½¿ç”¨æƒ…å†µ

### æ–‡ä»¶å¤§å°
- FASTQæ–‡ä»¶ä¼šéšreadsæ•°é‡çº¿æ€§å¢é•¿
- è€ƒè™‘ç£ç›˜ç©ºé—´é™åˆ¶
- å¯ä»¥ä½¿ç”¨å‹ç¼©æ ¼å¼èŠ‚çœç©ºé—´

### ç”Ÿç‰©å­¦çœŸå®æ€§
- æ¨¡æ‹Ÿæ•°æ®ç®€åŒ–äº†çœŸå®æƒ…å†µ
- ä¸åŒ…å«æµ‹åºé”™è¯¯å’Œåå‘æ€§
- å˜å¼‚åˆ†å¸ƒå¯èƒ½ä¸å®Œå…¨ç¬¦åˆçœŸå®æƒ…å†µ

## ğŸ“š æ‰©å±•é˜…è¯»

### ç›¸å…³å·¥å…·
- **ART**: æ›´å¤æ‚çš„æµ‹åºæ¨¡æ‹Ÿå™¨
- **DWGSIM**: å…¨åŸºå› ç»„æµ‹åºæ¨¡æ‹Ÿ
- **NEAT**: åŒ…å«ç»“æ„å˜å¼‚çš„æ¨¡æ‹Ÿå™¨

### AWS Omicsèµ„æº
- [AWS Omics ç”¨æˆ·æŒ‡å—](https://docs.aws.amazon.com/omics/)
- [WDLè¯­è¨€è§„èŒƒ](https://github.com/openwdl/wdl)
- [GATKæœ€ä½³å®è·µ](https://gatk.broadinstitute.org/hc/en-us/sections/360007226651)

### åŸºå› ç»„å­¦èµ„æº
- [NCBIåŸºå› ç»„æ•°æ®åº“](https://www.ncbi.nlm.nih.gov/genome/)
- [EnsemblåŸºå› ç»„æµè§ˆå™¨](https://www.ensembl.org/)
- [UCSCåŸºå› ç»„æµè§ˆå™¨](https://genome.ucsc.edu/)

---

**æœ€åæ›´æ–°**: 2025å¹´8æœˆ7æ—¥  
**ç‰ˆæœ¬**: v1.0  
**é€‚ç”¨äº**: AWS Omics å¥¶ç‰›åŸºå› ç»„å­¦æ¼”ç¤ºé¡¹ç›®
